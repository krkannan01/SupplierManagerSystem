<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.xt.sms.dao.IProductGroupDao" >

  <select id="getProductGroupList" resultType="ProductGroup" parameterType="integer">
    SELECT `id`,`name` FROM `table_product_group` WHERE `parent_id` = #{parentId}
  </select>

  <select id="getProductGroupById" resultType="ProductGroup" parameterType="integer">
    SELECT `id`,`name`,`parent_id` as `parentId` FROM `table_product_group` WHERE `id` = #{id}
  </select>

  <insert id="insertProductGroup" parameterType="ProductGroup" useGeneratedKeys="true" keyProperty="id">
    INSERT INTO `table_product_group` (`id`, `name`, `parent_id`) VALUE (#{id}, #{name}, #{parentId})
  </insert>

  <delete id="deleteProductGroup" parameterType="integer">
    DELETE FROM `table_product_group` WHERE `id` = #{id};
    DELETE FROM `table_product_group` WHERE `parent_id` = #{id}
  </delete>

  <update id="updateProductGroup" parameterType="ProductGroup">
    UPDATE `table_product_group`
    <set>
      `id` = #{id},
      <if test="name != null and name != ''">`name` = #{name},</if>
      <if test="parentId != null">`parent_id` = #{parentId}</if>
    </set>
    WHERE `id` = #{id}
  </update>

  <select id="getIdByName" parameterType="String" resultType="integer">
    SELECT `id` FROM `table_product_group` WHERE `name` = #{name} LIMIT 0,1
  </select>

</mapper>